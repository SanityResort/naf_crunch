<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Eurobowl Charts</title>
    <link rel="stylesheet" href="css/chart.css"/>
    <script src="d3.v4.js"></script>
    <script src="drawcharts.js"></script>

    <!-- Bootstrap -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="js/bootstrap-multiselect.js"></script>
    <script type="text/javascript" src="js/bootstrap-multiselect-collapsible-groups.js"></script>
    <script type="text/javascript" src="js/Sortable.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap-multiselect.css" type="text/css"/>

</head>
<body>
<select id="tournaments" class="tournaments" multiple="multiple">
    <optgroup label="2016">
        <option value="EuroBowl - 2016"  selected="selected">EuroBowl - 2016</option>
       <option value="EurOpen - 2016" selected="selected">EurOpen - 2010</option>
    </optgroup>
    <optgroup label="2014">
        <option value="EuroBowl - 2014" selected="selected">EuroBowl - 2014</option>
        <option value="EurOpen - 2014" selected="selected">EurOpen - 2014</option>
    </optgroup>
    <optgroup label="2013">
        <option value="EuroBowl - 2013" selected="selected">EuroBowl - 2013</option>
        <option value="EurOpen - 2013" selected="selected">EurOpen - 2013</option>
    </optgroup>
    <optgroup label="2012">
        <option value="EuroBowl - 2012" selected="selected">EuroBowl - 2012</option>
        <option value="EurOpen - 2012" selected="selected">EurOpen - 2012</option>
    </optgroup>
    <optgroup label="2010">
        <option value="EuroBowl - 2010" selected="selected">EuroBowl - 2010</option>
        <option value="EurOpen - 2010" selected="selected">EurOpen - 2010</option>
    </optgroup>
    <option value="EuroBowl - 2009" selected="selected">EuroBowl - 2009</option>
    <option value="EuroBowl - 2008" selected="selected">EuroBowl - 2008</option>
    <option value="EuroBowl - 2006" selected="selected">EuroBowl - 2006</option>
    <option value="EuroBowl - 2005" selected="selected">EuroBowl - 2005</option>
    <option value="EuroBowl - 2004" selected="selected">EuroBowl - 2004</option>
    <option value="EuroBowl - 2003" selected="selected">EuroBowl - 2003</option>
</select>

<select id="races" class="races" multiple="multiple">
    <option value="Amazons" selected="selected">Amazons</option>
    <option value="Chaos" selected="selected">Chaos</option>
    <option value="Chaos Dwarves" selected="selected">Chaos Dwarves</option>
    <option value="Chaos Pact" selected="selected">Chaos Pact</option>
    <option value="Dark Elves" selected="selected">Dark Elves</option>
    <option value="Dwarves" selected="selected">Dwarves</option>
    <option value="Elves" selected="selected">Elves</option>
    <option value="Goblins" selected="selected">Goblins</option>
    <option value="Halflings" selected="selected">Halflings</option>
    <option value="High Elves" selected="selected">High Elves</option>
    <option value="Humans" selected="selected">Humans</option>
    <option value="Khemri" selected="selected">Khemri</option>
    <option value="Lizardmen" selected="selected">Lizardmen</option>
    <option value="Necromantic" selected="selected">Necromantic</option>
    <option value="Norse" selected="selected">Norse</option>
    <option value="Nurgle's Rotters" selected="selected">Nurgle's Rotters</option>
    <option value="Ogres" selected="selected">Ogres</option>
    <option value="Orc" selected="selected">Orc</option>
    <option value="Skaven" selected="selected">Skaven</option>
    <option value="Slann" selected="selected">Slann</option>
    <option value="Undead" selected="selected">Undead</option>
    <option value="Underworld" selected="selected">Underworld</option>
    <option value="Vampires" selected="selected">Vampires</option>
    <option value="Wood Elves" selected="selected">Wood Elves</option>
</select>

<select id="opponentraces" class="opponentraces" multiple="multiple">
    <option value="Amazons" selected="selected">Amazons</option>
    <option value="Chaos" selected="selected">Chaos</option>
    <option value="Chaos Dwarves" selected="selected">Chaos Dwarves</option>
    <option value="Chaos Pact" selected="selected">Chaos Pact</option>
    <option value="Dark Elves" selected="selected">Dark Elves</option>
    <option value="Dwarves" selected="selected">Dwarves</option>
    <option value="Elves" selected="selected">Elves</option>
    <option value="Goblins" selected="selected">Goblins</option>
    <option value="Halflings" selected="selected">Halflings</option>
    <option value="High Elves" selected="selected">High Elves</option>
    <option value="Humans" selected="selected">Humans</option>
    <option value="Khemri" selected="selected">Khemri</option>
    <option value="Lizardmen" selected="selected">Lizardmen</option>
    <option value="Necromantic" selected="selected">Necromantic</option>
    <option value="Norse" selected="selected">Norse</option>
    <option value="Nurgle's Rotters" selected="selected">Nurgle's Rotters</option>
    <option value="Ogres" selected="selected">Ogres</option>
    <option value="Orc" selected="selected">Orc</option>
    <option value="Skaven" selected="selected">Skaven</option>
    <option value="Slann" selected="selected">Slann</option>
    <option value="Undead" selected="selected">Undead</option>
    <option value="Underworld" selected="selected">Underworld</option>
    <option value="Vampires" selected="selected">Vampires</option>
    <option value="Wood Elves" selected="selected">Wood Elves</option>
</select>

<div id="splitfields">
    <label class="splitfield"><input type="checkbox" value="opponentrace">Opponent Race</label>
    <label class="splitfield"><input type="checkbox" value="race" checked="checked">Race</label>
    <label class="splitfield"><input type="checkbox" value="tournament">Tournament</label>
    <label class="splitfield"><input type="checkbox" value="year">Year</label>
</div>

<button id="createButton">Create graph</button>

<script type="text/javascript">
    let getValues = function(array){
        return $.map(array, function(option, i) {return option.value})
    }

    $(document).ready(function() {
        let chartService = ChartService();

        $('#tournaments').multiselect({
            enableClickableOptGroups: true,
            allSelectedText: "All Tournaments"
        });
        $('#races').multiselect({
            enableClickableOptGroups: true,
            allSelectedText: "All Races"
        });
        $('#opponentraces').multiselect({
            enableClickableOptGroups: true,
            allSelectedText: "All Races"
        });

        let splitfields = Sortable.create(document.getElementById('splitfields'), {animation: 150})

        $('#createButton').click(function() {
           let tournaments = getValues($('#tournaments option:selected'))
           let races = getValues($('#races option:selected'))
           let opponentRaces = getValues($('#opponentraces option:selected'))
           let splitfields = getValues($('#splitfields input:checked'))

           console.log(JSON.stringify(tournaments))
           console.log(JSON.stringify(races))
           console.log(JSON.stringify(opponentRaces))
           console.log(JSON.stringify(splitfields))
        })

    });
</script>

<script>


    //draw();

</script>
</body>
</html>